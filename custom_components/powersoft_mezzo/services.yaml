save_scene:
  name: Save Scene
  description: Save current amplifier state as a new scene
  fields:
    name:
      name: Scene Name
      description: Name for the new scene
      required: true
      example: "Evening Listening"
      selector:
        text:

update_scene:
  name: Update Scene
  description: Update an existing scene with current amplifier state
  fields:
    scene_id:
      name: Scene ID
      description: ID of the scene to update
      required: true
      example: 1
      selector:
        number:
          min: 1
          max: 999
          mode: box

delete_scene:
  name: Delete Scene
  description: Delete a scene
  fields:
    scene_id:
      name: Scene ID
      description: ID of the scene to delete
      required: true
      example: 1
      selector:
        number:
          min: 1
          max: 999
          mode: box

rename_scene:
  name: Rename Scene
  description: Rename an existing scene
  fields:
    scene_id:
      name: Scene ID
      description: ID of the scene to rename
      required: true
      example: 1
      selector:
        number:
          min: 1
          max: 999
          mode: box
    name:
      name: New Name
      description: New name for the scene
      required: true
      example: "My Custom Scene"
      selector:
        text:

capture_eq:
  name: Capture EQ Settings
  description: Read and log current EQ settings from amplifier (for debugging)

disable_manual_source_mode:
  name: Disable Manual Source Mode
  description: Emergency fix to restore automatic source routing. Use this if channel 1 is silent after changing sources. This writes 0 to the manual source selection register to disable manual override mode.

enable_manual_source_mode:
  name: Enable Manual Source Mode
  description: Emergency recovery to force ALL channels to use the same source. Use this when automatic routing fails and channels are silent. WARNING - This overrides all per-channel source settings.
  fields:
    source_id:
      name: Source ID
      description: Source to use for ALL channels (-1=muted, 0-31=sources)
      required: true
      example: 2
      selector:
        number:
          min: -1
          max: 31
          mode: box

read_source_registers:
  name: Read Source Registers
  description: Diagnostic tool to read and display all source-related registers. Shows current source ID status, priority source settings, and manual source selection mode for all channels.

read_all_eq_registers:
  name: Read All EQ Registers
  description: Diagnostic tool to read and display all EQ-related memory areas (User EQ, Zone EQ, Source Config, Ways area). Use this to reverse-engineer different EQ types by comparing before/after changes in Armon√≠a Plus.

read_zone_registers:
  name: Read Zone Registers
  description: Diagnostic tool to read and display Zone control registers (enable, mute, gain, GUIDs) to understand zone configuration.

read_device_info:
  name: Read Device Information
  description: Diagnostic tool to query and display all device identification and status information (model, serial, firmware, MAC, temperatures, standby state). Use this to debug device discovery issues and verify communication.
  fields:
    host:
      name: Host IP Address
      description: Optional IP address to query. If not specified, uses the configured amplifier.
      required: false
      example: "10.0.42.38"
      selector:
        text:

discover_amplifiers:
  name: Discover Amplifiers
  description: Scan network for Powersoft amplifiers and display all discovered devices with their IP addresses, models, and status. Useful for diagnosing discovery issues.
  fields:
    timeout:
      name: Timeout
      description: Time to wait for responses in seconds
      required: false
      default: 5
      example: 5
      selector:
        number:
          min: 1
          max: 30
          mode: box

test_port_scan:
  name: Test Port Scan
  description: Test connectivity to a specific amplifier on different UDP ports to identify which port it's using for PBus communication.
  fields:
    host:
      name: Host IP Address
      description: IP address of the amplifier to test
      required: true
      example: "10.0.42.38"
      selector:
        text:
    start_port:
      name: Start Port
      description: First port to test
      required: false
      default: 8000
      example: 8000
      selector:
        number:
          min: 1
          max: 65535
          mode: box
    end_port:
      name: End Port
      description: Last port to test
      required: false
      default: 8010
      example: 8010
      selector:
        number:
          min: 1
          max: 65535
          mode: box
    timeout:
      name: Timeout per port
      description: Time to wait for response on each port (seconds)
      required: false
      default: 0.5
      example: 0.2
      selector:
        number:
          min: 0.1
          max: 5.0
          step: 0.1
          mode: box
